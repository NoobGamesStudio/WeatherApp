<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:WA_Front.Controls"
             x:Class="WA_Front.View.CalendarView">
    <ContentView.Resources>
        <Style TargetType="Label">
            <Setter Property="BackgroundColor" Value="#8F89CF"/>
            <Setter Property="TextColor" Value="White"/>
        </Style>
        <Style TargetType="Border">
            <Setter Property="VisualStateManager.VisualStateGroups">
                <VisualStateGroupList>
                    <VisualStateGroup Name="CheckedStates">
                        <VisualState Name="Checked">
                            <VisualState.Setters>
                                <Setter Property="Stroke" Value="{x:StaticResource Primary}"/>
                                <Setter Property="StrokeThickness" Value="5"/>
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState Name="Unchecked">
                            <VisualState.Setters>
                                <Setter Property="StrokeThickness" Value="0"/>
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateGroupList>
            </Setter>
        </Style>
    </ContentView.Resources>
    <controls:Expander Orientation="Right" x:Name="test" VerticalOptions="FillAndExpand">
        <controls:Expander.HeaderContent>
            <controls:HorizontalFlexLayout Spacing="10"
                                           Padding="5"
                                           BindableLayout.ItemsSource="{Binding DailyWeather}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <RadioButton IsChecked="{Binding IsExpanded, Source={x:Reference test}, Mode=OneWayToSource}">
                            <RadioButton.ControlTemplate>
                                <ControlTemplate>
                                    <Border WidthRequest="125"
                                            HeightRequest="125">
                                        <Border.StrokeShape>
                                            <RoundRectangle CornerRadius="5"/>
                                        </Border.StrokeShape>
                                        <Grid RowDefinitions="*,*"
                                              ColumnDefinitions="*,*"
                                              BindingContext="{TemplateBinding BindingContext}">
                                            <Grid.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped" 
                                                                      CommandParameter="{TemplateBinding}"/>
                                            </Grid.GestureRecognizers>
                                            <Image Grid.Row="0"
                                                   Grid.Column="0"
                                                   Source="{Binding ImageSource}"/>
                                            <Label Grid.Row="0"
                                                   Grid.Column="1"
                                                   Text="{Binding Temperature}"/>
                                            <Label Grid.Row="1"
                                                   Grid.Column="0"
                                                   BackgroundColor="#312D59"
                                                   Text="{Binding RealTemperature}"/>
                                            <Label Grid.Row="1"
                                                   Grid.Column="1"
                                                   BackgroundColor="#312D59"
                                                   Text="{Binding Rain}"/>
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </RadioButton.ControlTemplate>
                        </RadioButton>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </controls:HorizontalFlexLayout>
        </controls:Expander.HeaderContent>
        <controls:Expander.MainContent>
            <Grid RowDefinitions="Auto,Auto,Auto,Auto,*"
                  BackgroundColor="{x:StaticResource Primary}"
                  WidthRequest="200"
                  Padding="5"
                  RowSpacing="5"
                  x:Name="Content">
                <Grid.Resources>
                    <Style TargetType="Label">
                        <Setter Property="TextColor" Value="White"/>
                        <Setter Property="BackgroundColor" Value="#312D59"/>
                    </Style>
                </Grid.Resources>
                <Image Grid.Row="0"
                       Source="{Binding ImageSource}"/>
                <Label Grid.Row="1"
                       Text="{Binding Temperature, StringFormat='{0}C'}"/>
                <Label Grid.Row="2"
                       Text="{Binding RealTemperature, StringFormat='Real {0}C'}"/>
                <Label Grid.Row="3"
                       Text="{Binding Rain}"/>
            </Grid>
        </controls:Expander.MainContent>
    </controls:Expander>
</ContentView>
